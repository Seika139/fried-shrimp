services:
  openclaw-gateway:
    image: ghcr.io/seika139/fried-shrimp:feature-devcontainer
    volumes:
      - ..:/app
    # Use pnpm dev/watch script for hot reloading if available, or just keep it running
    # The 'dev' script in package.json runs 'node scripts/run-node.mjs'
    # 'gateway:dev' runs 'OPENCLAW_SKIP_CHANNELS=1 ... node scripts/run-node.mjs --dev gateway'
    # We probably want to start in a way that allows the user to run commands, or just start the gateway.
    # Typically in devcontainer, we might want to just sleep so user can run terminals, OR run the dev server.
    # Let's run the dev server but allow overriding.
    command: ["pnpm", "gateway:dev"]
    environment:
      OPENCLAW_CONFIG_DIR: /home/node/.openclaw
      OPENCLAW_WORKSPACE_DIR: /home/node/.openclaw/workspace
      OPENCLAW_GATEWAY_PORT: 18789
      OPENCLAW_BRIDGE_PORT: 18790
      OPENCLAW_GATEWAY_BIND: lan
      OPENCLAW_IMAGE: openclaw:local
